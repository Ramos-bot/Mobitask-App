entrypoint = "index.js"
modules = ["nodejs-22", "web"]
hidden = [".config", "package-lock.json", ".expo", "node_modules", ".git"]

run = "npm run web"

[gitHubImport]
requiredFiles = [".replit", "replit.nix", "package.json", "index.js", "app.json"]

[nix]
channel = "stable-24_11"

[deployment]
<<<<<<< HEAD
run = ["sh", "-c", "node server.js"]
=======
install = ["bash", "-lc", "npm ci"]
build = ["bash", "-lc", "npm run build:web"]
run = ["bash", "-lc", "node server.js"]
>>>>>>> b0c14fa236b45e8d50b7ec6e37e8856a16aa59c4
deploymentTarget = "autoscale"
ignorePorts = false
build = ["sh", "-c", "npm run build:web  "]

[env]
NODE_ENV = "production"
PORT = "5000"
EXPO_DEVTOOLS_LISTEN_ADDRESS = "0.0.0.0"
REACT_NATIVE_PACKAGER_HOSTNAME = "0.0.0.0"

[languages.javascript]
pattern = "**/{*.js,*.jsx,*.ts,*.tsx}"
syntax = "javascript"

[languages.javascript.languageServer]
start = ["typescript-language-server", "--stdio"]

[packager]
language = "nodejs"
ignoredPackages = ["unit_tests"]

[packager.features]
packageSearch = true
guessImports = true
enabledForHosting = false

[unitTest]
language = "nodejs"

[workflows]
runButton = "Production Deploy"

[[workflows.workflow]]
name = "Production Deploy"
author = 45324416
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm ci"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run build:web"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "node server.js"

[[ports]]
localPort = 5000
externalPort = 80
